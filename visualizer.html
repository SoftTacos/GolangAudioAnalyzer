<!doctype html>
<html>
  <body>
    <div id="wrapper" position=absolute>
			<canvas id="c" class="visualizer"></canvas>
		</div>
  </body>
</html>

<script>
let socket = new WebSocket("ws://localhost:8082/visualizerSocket");
//open – connection established,
//message – data received,
//error – websocket error,
//close – connection closed.
  
var canvas = document.getElementById("c");
var cc = canvas.getContext("2d");

var toType = function(obj) {//from: http://javascriptweblog.wordpress.com/2011/08/08/fixing-the-javascript-typeof-operator/
  return ({}).toString.call(obj).match(/\s([a-zA-Z]+)/)[1].toLowerCase()
}

socket.onopen = function(event) {
  console.log("Connected");
};

//https://developer.mozilla.org/en-US/docs/Web/API/MessageEvent
socket.onmessage = function(event) {
  console.log(`Server: \"${event.data}\"`);
  console.log(event.data.length)
};

socket.onclose = function(event) {
  if (event.wasClean) {
    console.log(`[close] Connection closed cleanly, code=${event.code} reason=${event.reason}`);
  } else {
    // e.g. server process killed or network down
    // event.code is usually 1006 in this case
    console.log('[close] Connection died');
  }
};

socket.onerror = function(error) {
  console.log(`[error] ${error.message}`);
};

</script>
